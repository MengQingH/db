## 命令行登录
mysql -u root -p，然后输入密码登录。


# 范式
数据库范式是设计数据库需要满足的规范，满足这些规范的数据库是简洁、结构明晰的，并且不会发生插入异常、删除异常和更新异常，数据冗余应该尽可能的低。范式分为第一范式、第二范式、第三范式、BC范式，后面的范式包含前面的范式，即如果一个数据库符合第三范式，那么一定符合第二和第一范式。通常来说，数据库只需要满足第三范式就可以了。
## 相关概念
* **函数依赖**：如果表中的属性X确定的情况下，Y的值也确定，那么就可以说Y依赖于X，记作X → Y。

* **完全函数依赖**：如果X→Y，对于X的任意一个真子集Z，Z→Y不成立，那么称Y对X完全函数依赖，记作X F→ Y （F在箭头的上方）。
* **部分函数依赖**：如果Y依赖于X，但同时Y并不完全依赖于X，那么就称Y部分函数依赖于X，记作X P→ Y（P在箭头上方）。
* **传递函数依赖**：加入Z函数依赖于Y，Y函数依赖于X，那么就称Z传递函数依赖于X，记作X T→ Z（T在箭头上方）。
* **码**：设K为表中的一个属性或属性组，若除K之外所有的属性都完全依赖于K，那么称K为候选码，简称码。实际中可以理解为：加入K确定的情况下，该表除了K之外所有的属性也随之确定，那么K就是码。一张表可以有超过一个码。
* **主属性**：包含在任意一个码中的属性称为主属性，不包含在任意一个码中的属性称为非主属性。
* **模式分解**：为了使表中的数据达到更高一级的要求，就要消除函数依赖使表满足更高一级的要求。具体就是把表拆分成两个或多个更小的数据表，在拆分的过程中，达到更高一级范式的要求，这个过程叫**模式分解**。

## 第一范式 1NF
数据库中的每一个属性都不可再分解，如下图的情况就不满足第一范式。一般数据库都满足第一范式。
<br><img src=img/1nf.png><br>
* 如果仅仅符合一范式的设计，那么数据库表仍会出现数据冗余过大，插入异常、删除异常、修改异常的问题。

## 第二范式 2NF
非主属性完全依赖于主键。在一范式的基础上**消除了非主属性对于码的部分函数依赖**。即如果一个表中X、Y两个属性是主码，如果存在非主属性Z，使X→Z，那么就不是二范式。<br>
为了让表符合二范式的要求，就必须消除非主属性对于码的部分函数依赖。
* 二范式存在插入异常、删除异常、修改复杂等问题。原因：存在非主属性对于码的部分函数依赖。

## 第三范式 3NF
在二范式的基础上，消除了非主属性对于码的传递函数依赖。即如果一个函数中主码为X，存在非主属性YZ，使X→Y，Y→Z，那么就不是三范式。

## BC范式 BCNF
在3NF的基础上消除了主属性对于码的部分函数依赖与传递函数依赖。BC范式相比3NF又改进了一步，通常称为修正的第三范式。


# MySQL系统变量
系统变量实际上用于控制数据库的一些行为和方式的参数。比如我们启动数据库的时候设定多大的内存，使用什么样的隔离级别，日志文件的大小，存放位置等等。系统变量可以分为全局及会话两种级别，全局变量影响服务器的全局操作，会话变量影响具体客户端连接相关操作。

服务器启动时，将所有全局变量初始化为默认值。可以在选项文件或命令行中指定的选项来更改这些默认值。服务器启动后，通过连接服务器并执行SET GLOBAL var_name语句可以更改动态全局变量。要想更改全局变量，必须具有SUPER权限。

服务器还为每个客户端连接维护会话变量。连接时使用相应全局变量的当前值对客户端会话变量进行初始化。客户可以通过SET SESSION var_name语句来更改动态会话变量。设置会话变量不需要特殊权限，但客户可以只更改自己的会话变量，而不更改其它客户的会话变量。
## SQL语句
* show [global|session] variables [like '']：查看所有的系统变量。
    * global|session：可选参数，选择全局变量还是当前连接的变量，默认为当前连接。
    * like ''：可选参数，表示查询含有指定内容的参数。
* set [global|session] name=value：设置系统变量值。
    * global|session：可选择设置全局变量还是当前连接的会话变量。默认为会话变量。

# MySQL状态信息
MySQL运行过程中的状态，比如当前MySQL启动后的运行时间，当前MySQL客户端的连接数，当前服务器执行的慢查询数，当前MySQL执行了多少select、update语句等等，这些信息无法通过人为修改，只能在系统运行过程中自己改变。
* show [global|session(local)] status [like '']：查看系统的运行状态参数。
    * global|session(local)：可选参数，表示状态查询是全局还是当前连接。默认为当前连接。
    * like ''：可选参数，表示查询含有指定内容的参数。

# 存储过程
存储过程是事先编译并存储在数据库中的一段SQL语句的集合。进一步说，存储过程是由一些T-SQL语句组成的代码块，这些代码像一个方法一样实现一些功能（对单表或多表的增删改查），然后再给这写代码块取一个名字，在用到这个功能的时候用它就行了。存储过程具有以下特点：
* 存储过程只在创建时进行编译，以后每次执行存储过程都不需要再重新编译，而一般的sql语句每执行一次就编译一次，所以使用存储过程可以提高数据库执行效率。
* 当SQL语句有变动时，可以只修改数据库的存储过程而不修改代码。
* 减少网络传输，在客户端调用一个存储过程比执行一串SQL传输的数据量要小。
* 通过减少存储过程能够使没有权限的用户在控制之下间接的存取数据库，从而确保数据的安全。

# drop delete truncate
三者都表示删除，但是有一些差别。
* delete表示删除表的全部或者一部分数据行，在执行delete之后，用户需要提交或回滚来执行删除或者撤销删除，delete命令会触发在这个表上的delete触发器。
* truncate删除表中的所有数据，这个操作不能回滚，也不会触发表上的触发器，truncate比delete刚快，占用的空间更小。
* drop命令从数据库中删除表，所有的数据行、索引和权限也会删除，所有的DML触发器也不会被触发，这个命令也不能回滚。

因此，不再需要一张表的时候使用drop；删除部分数据行的时候用delete；保留表而删除数据的时候使用truncate。

# 视图
* 视图是从一个或几个基本表中导出的表，它与基本表不同，是一个虚表。
* 数据库中只存放视图的定义，而不存放视图对应的数据，数据仍存放在原来的基本表中。
* 一旦基本表中的事件发生变化那么从视图中查询出的数据也随之改变了。特别的，对视图的修改不影响基本表。
* 关系数据库管理系统执行create view语句的结果只是把视图的定义存入数据字典，并不执行其中的select语句。只是在对视图查询时，才按视图的定义从基本表中将数据查出。